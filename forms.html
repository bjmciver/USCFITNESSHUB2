<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Forms</title>
  <!-- Inline critical styles so we don't rely on styles.css -->
  <style>
    /* layout helpers (very small) */
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; margin: 20px; color:#222 }
    .container { max-width: 900px; margin: 0 auto; }
    .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .card { padding: 16px; border: 1px solid #eee; border-radius: 8px; background: #fff; }
    label { display:block; margin-top:12px; font-weight:600; }
    input, textarea { width:100%; padding:8px; margin-top:6px; box-sizing:border-box; border:1px solid #ccc; border-radius:6px; }
    .form-actions { margin-top:14px; display:flex; gap:8px; }
    .btn { padding:8px 12px; border-radius:6px; border:1px solid #ccc; background:#f4f4f4; cursor:pointer; }
    .btn-primary { background:#0575e6; color:#fff; border-color:rgba(0,0,0,0.06); }

    /* validation styles */
    .error-message { color:#d9534f; font-size:0.9rem; margin-top:6px; display:block; }
    input.invalid, textarea.invalid { border:2px solid #d9534f; background:#fff5f5; }
    .goal-options label { display:inline-block; margin-right:10px; font-weight:400; }
    @media (max-width:700px){ .two-col{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <section id="forms" class="section">
    <div class="container">
      <h2 class="section-title">Feedback & Assessment Forms</h2>

      <div class="two-col">
        <!-- Fitness Assessment -->
        <div class="card">
          <h3>Fitness Assessment</h3>
          <form id="fitness-assessment-form" novalidate>
            <label for="fa-name">Name *</label>
            <input id="fa-name" name="name" type="text" required>

            <label for="fa-email">Email *</label>
            <input id="fa-email" name="email" type="email" required>

            <label>Goal</label>
            <div class="goal-options">
              <label><input type="radio" name="goal" value="lose"> Lose Weight</label>
              <label><input type="radio" name="goal" value="maintain" checked> Maintain</label>
              <label><input type="radio" name="goal" value="gain"> Gain</label>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary">Submit</button>
              <button type="reset" class="btn">Reset</button>
            </div>
          </form>
        </div>

        <!-- Feedback Form -->
        <div class="card">
          <h3>Feedback Form</h3>
          <form id="feedback-form" novalidate>
            <label for="fb-name">Name *</label>
            <input id="fb-name" name="name" type="text" required>

            <label for="fb-email">Email *</label>
            <input id="fb-email" name="email" type="email" required>

            <label for="fb-comments">Comments</label>
            <textarea id="fb-comments" name="comments" rows="6"></textarea>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary">Submit</button>
              <button type="reset" class="btn">Reset</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    console.log('validator: loaded');

    function isValidEmail(value) {
      return /^[^\s@]+@[^\s@]+\.(com|net)$/i.test(value.trim());
    }

    function showError(el, msg) {
      clearError(el);
      const error = document.createElement('span');
      error.className = 'error-message';
      error.textContent = msg;
      el.insertAdjacentElement('afterend', error);
      el.classList.add('invalid');
    }

    function clearError(el) {
      if (!el) return;
      el.classList.remove('invalid');
      const next = el.nextElementSibling;
      if (next && next.classList.contains('error-message')) next.remove();
    }

    function validateForm(form) {
      let valid = true;
      const requiredInputs = Array.from(form.querySelectorAll('[required]'));
      console.log('validator: required inputs ->', requiredInputs.map(i=>i.id||i.name));

      requiredInputs.forEach(input => {
        clearError(input);
        const val = (input.value || '').toString();
        if (!val.trim()) {
          showError(input, 'This field is required');
          valid = false;
          return;
        }
        if (input.type === 'email' && !isValidEmail(val)) {
          showError(input, 'Enter a valid email (must include @ and end with .com or .net)');
          valid = false;
        }
      });

      if (form.id === 'fitness-assessment-form') {
        const radios = form.querySelectorAll('input[name="goal"]');
        const anyChecked = Array.from(radios).some(r => r.checked);
        form.querySelectorAll('.error-message--radio').forEach(n => n.remove());
        if (!anyChecked) {
          const err = document.createElement('span');
          err.className = 'error-message error-message--radio';
          err.textContent = 'Please select a goal';
          radios[radios.length-1].insertAdjacentElement('afterend', err);
          valid = false;
        }
      }

      console.log('validator: form valid?', valid);
      return valid;
    }

    document.querySelectorAll('form').forEach(form => {
      form.setAttribute('novalidate', 'novalidate');

      form.addEventListener('submit', e => {
        console.log('validator: submit:', form.id);
        e.preventDefault();
        e.stopPropagation();

        form.querySelectorAll('.error-message--radio').forEach(n => n.remove());

        if (!validateForm(form)) {
          const firstInvalid = form.querySelector('.invalid');
          if (firstInvalid && typeof firstInvalid.focus === 'function') firstInvalid.focus();
          return;
        }

        // replace this with AJAX / backend submission as needed
        alert('✅ Form passed validation — replace with your submit logic.');
        form.reset();
        form.querySelectorAll('.error-message').forEach(n => n.remove());
        form.querySelectorAll('.invalid').forEach(i => i.classList.remove('invalid'));
      });

      form.addEventListener('input', e => {
        if (!e.target) return;
        if (e.target.type === 'radio') {
          form.querySelectorAll('.error-message--radio').forEach(n => n.remove());
          return;
        }
        if (e.target.matches('[required], input[type="email"], textarea')) clearError(e.target);
      });

      form.addEventListener('reset', () => {
        setTimeout(() => {
          form.querySelectorAll('.error-message').forEach(n => n.remove());
          form.querySelectorAll('.invalid').forEach(i => i.classList.remove('invalid'));
        }, 0);
      });
    });

    // defensive: prevent anchor jumps
    document.addEventListener('click', e => {
      const a = e.target.closest ? e.target.closest('a') : null;
      if (a && (a.getAttribute('href') === '#' || a.getAttribute('href') === '')) {
        e.preventDefault();
      }
    });
  });
  </script>
</body>
</html>






