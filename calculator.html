<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Calculator - Test</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* Minimal styles so this is self-contained and won't conflict */
    :root{ --accent:#73000a; }
    body{ font-family:Arial, sans-serif; background:#f6f7f8; margin:0; padding:24px; color:#222; }
    .container{ max-width:960px; margin:0 auto; padding:0 12px; }
    .calculator-section{ padding:18px 0; }
    h2{ color:var(--accent); text-align:center; margin:0 0 6px; }
    p.subtitle{ text-align:center; color:#555; margin:0 0 18px; }

    .calc-grid{ display:grid; grid-template-columns: 1fr 360px; gap:18px; align-items:start; }
    @media (max-width:880px){ .calc-grid{ grid-template-columns:1fr; } }

    .card{ background:#fff; border:1px solid #e6e6e6; border-radius:10px; padding:16px; box-shadow:0 2px 6px rgba(0,0,0,0.04); }

    label{ display:block; font-weight:700; margin:8px 0 6px; }
    input[type="number"], select { width:100%; padding:9px 10px; border:1px solid #ddd; border-radius:6px; box-sizing:border-box; }

    .goal-options{ display:flex; flex-direction:column; gap:8px; margin-top:6px; }
    .form-actions{ display:flex; gap:10px; margin-top:12px; }
    .btn{ padding:9px 14px; border-radius:8px; font-weight:700; cursor:pointer; border:none; }
    .btn-primary{ background:var(--accent); color:#fff; }
    .btn-secondary{ background:#fff; color:#111; border:1px solid #d0d0d0; }

    .calc-img{ width:100%; height:200px; object-fit:cover; border-radius:8px; display:block; }
    .result-grid{ display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:12px; }
    .result-box{ background:#f3f3f3; border-radius:8px; padding:10px; text-align:center; }
    .result-box strong{ display:block; font-size:1.2rem; color:#222; }

    /* small page footer note */
    .note{ margin-top:14px; font-size:0.9rem; color:#666; text-align:center; }
  </style>
</head>
<body>
  <div class="container">
    <section id="calculator" class="calculator-section">
      <h2>Fitness Calculator</h2>
      <p class="subtitle">Enter your info below to get tailored calorie and protein goals.</p>

      <div class="calc-grid">
        <!-- LEFT: form -->
        <div class="card">
          <h3 style="margin-top:0;">Personal Information</h3>

          <!-- NOTE: the form has unique IDs and buttons use explicit IDs for JS -->
          <form id="calc-form" novalidate>
            <label for="height">Height (ft — decimal)</label>
            <input id="height" name="height" type="number" step="0.01" placeholder="5.10" value="5.10">

            <label for="weight">Weight (lbs)</label>
            <input id="weight" name="weight" type="number" placeholder="160" value="160">

            <label for="age">Age</label>
            <input id="age" name="age" type="number" placeholder="20" value="20">

            <label for="gender">Gender</label>
            <select id="gender" name="gender">
              <option>Male</option>
              <option>Female</option>
            </select>

            <label for="activity">Activity Level</label>
            <select id="activity" name="activity">
              <option value="1.2">Sedentary</option>
              <option value="1.375">Lightly Active</option>
              <option value="1.55">Moderately Active</option>
              <option value="1.725">Very Active</option>
            </select>

            <label>Goal</label>
            <div class="goal-options" role="radiogroup" aria-label="Goal">
              <label><input type="radio" name="goal" value="lose"> Lose Weight</label>
              <label><input type="radio" name="goal" value="maintain" checked> Maintain</label>
              <label><input type="radio" name="goal" value="gain"> Gain</label>
            </div>

            <div class="form-actions">
  <button type="button" id="calculate-btn" class="btn btn-primary">Calculate</button>
  <button type="button" id="reset-btn" class="btn btn-secondary">Reset</button>
</div>
          </form>
        </div>

        <!-- RIGHT: image + example + user result -->
        <div>
          <div class="card">
            <img class="calc-img" src="https://images.unsplash.com/photo-1685660477895-f1b6a417466b?auto=format&fit=crop&w=1080&q=60" alt="Health device">
          </div>

          <div class="card" style="margin-top:12px;">
            <h3 style="margin-top:0; text-align:center;">Example Result</h3>
            <p style="text-align:center; color:#555; margin:0 0 12px;">A 20-year-old student, 5’10”, 160 lbs, moderately active, trying to gain weight and muscle</p>
            <div class="result-grid">
              <div class="result-box"><strong>~2,700</strong><span>Calories to maintain</span></div>
              <div class="result-box"><strong>~170g</strong><span>Protein goal</span></div>
            </div>
          </div>

          <div id="user-result" class="card" style="margin-top:12px;">
            <h3 style="margin-top:0; text-align:center;">Your Result</h3>
            <p id="user-summary" style="text-align:center; color:#555; margin:0 0 12px;">Fill out the form and click calculate to see your results.</p>
            <div class="result-grid">
              <div class="result-box"><strong id="user-calories">0</strong><span>Calories to maintain</span></div>
              <div class="result-box"><strong id="user-protein">0g</strong><span>Protein goal</span></div>
            </div>
          </div>
        </div>
      </div>

      <p class="note">If this works, replace only your calculator fragment with matching IDs and handlers — do not duplicate IDs elsewhere.</p>
    </section>
  </div>

  <script>
(function () {
  // helper to safely read inputs (returns defaults if missing)
  function readInputs() {
    const weight = parseFloat(document.getElementById('weight')?.value) || 160;
    const height = parseFloat(document.getElementById('height')?.value) || 5.10;
    const age = parseFloat(document.getElementById('age')?.value) || 20;
    const gender = (document.getElementById('gender')?.value) || 'Male';
    const activity = parseFloat(document.getElementById('activity')?.value) || 1.55;
    return { weight, height, age, gender, activity };
  }

  function calculateAndUpdate() {
    const { weight, height, age, gender, activity } = readInputs();

    let bmr;
    if (String(gender).toLowerCase().startsWith('m')) {
      bmr = 66 + (6.23 * weight) + (12.7 * (height * 12)) - (6.8 * age);
    } else {
      bmr = 655 + (4.35 * weight) + (4.7 * (height * 12)) - (4.7 * age);
    }

    const calories = Math.round(bmr * activity);
    const protein = Math.round(weight * 1.1);
    const summary = `Based on your info: ${age} years old, ${height} ft, ${weight} lbs, activity factor ${activity}`;

    const userCaloriesEl = document.getElementById('user-calories');
    const userProteinEl = document.getElementById('user-protein');
    const userSummaryEl = document.getElementById('user-summary');

    if (userCaloriesEl) userCaloriesEl.textContent = "~" + calories;
    if (userProteinEl) userProteinEl.textContent = "~" + protein + "g";
    if (userSummaryEl) userSummaryEl.textContent = summary;
  }

  function doReset() {
    const form = document.getElementById('calc-form');
    if (form) form.reset();

    const userCaloriesEl = document.getElementById('user-calories');
    const userProteinEl = document.getElementById('user-protein');
    const userSummaryEl = document.getElementById('user-summary');

    if (userCaloriesEl) userCaloriesEl.textContent = "0";
    if (userProteinEl) userProteinEl.textContent = "0g";
    if (userSummaryEl) userSummaryEl.textContent = "Fill out the form and click calculate to see your results.";
  }

  // Primary: click handler on the Calculate button (works even if the form isn't present when script ran)
  document.addEventListener('click', function (ev) {
    const btn = ev.target.closest && ev.target.closest('#calculate-btn');
    if (btn) {
      ev.preventDefault();
      calculateAndUpdate();
    }
    const reset = ev.target.closest && ev.target.closest('#reset-btn');
    if (reset) {
      ev.preventDefault();
      doReset();
    }
  });

  // Secondary: delegated submit handler (catches native submits if anything triggers them)
  document.addEventListener('submit', function (ev) {
    const f = ev.target;
    if (f && f.id === 'calc-form') {
      ev.preventDefault();
      calculateAndUpdate();
    }
  });

  // Defensive: if form and buttons already exist and you want direct handlers, attach them
  // (this is optional; the above delegated handlers are usually enough).
  function attachDirectHandlersIfReady() {
    const calcBtn = document.getElementById('calculate-btn');
    const resetBtn = document.getElementById('reset-btn');
    const form = document.getElementById('calc-form');

    if (calcBtn && !calcBtn._bound) {
      calcBtn.addEventListener('click', function (e) { e.preventDefault(); calculateAndUpdate(); });
      calcBtn._bound = true;
    }
    if (resetBtn && !resetBtn._bound) {
      resetBtn.addEventListener('click', function (e) { e.preventDefault(); doReset(); });
      resetBtn._bound = true;
    }
    if (form && !form._bound) {
      form.addEventListener('submit', function (e) { e.preventDefault(); calculateAndUpdate(); });
      form._bound = true;
    }
  }

  // Try to attach direct handlers now and again shortly after in case fragment loads late
  attachDirectHandlersIfReady();
  setTimeout(attachDirectHandlersIfReady, 300);
})();
</script>
</body>
</html>
















